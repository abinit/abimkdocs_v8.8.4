



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Abinit documentation">
      
      
        <link rel="canonical" href="https://docs.abinit.org/tutorial/tdepes/">
      
      
        <meta name="author" content="The Abinit group">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.6">
    
    
      
        <title>Tdepes - abinit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    

    <!-- Jquery from Google CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Load Jquery UI -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <!-- Handle jQuery plugin naming conflict between jQuery UI and Bootstrap 
    https://stackoverflow.com/questions/13731400/jqueryui-tooltips-are-competing-with-twitter-bootstrap
    -->
    <script>
      $.widget.bridge('uibutton', $.ui.button);
      $.widget.bridge('uitooltip', $.ui.tooltip);
    </script>

    <!--
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/pepper-grinder/jquery-ui.css">
    -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.11.0/build/css/themes/bootstrap.min.css"/>

    <!-- Bootstrap http://getbootstrap.com/getting-started/ -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" 
    integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>

    <!-- font-awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    

    <!--Pace support. http://github.hubspot.com/pace/ -->
    <script>
        paceOptions = {
            ajax: true,      // disabled
            document: true,  // activated
            eventLag: false  // disabled
            //target: 'article'
            //elements: {selectors: ['.my-page']}
        };
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/white/pace-theme-big-counter.min.css" />
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/white/pace-theme-bounce.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-corner-indicator.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-flat-top.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-loading-bar.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-center-atom.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-flash.min.css" />
    -->

    <!-- MathJax support
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script> 
    -->
    <!--
    This is compatible with plotly.
    -->
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG">
    </script> 

    <!--
    Configure MathJax to produce automatic equation numbers http://docs.mathjax.org/en/latest/tex.html
    -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        //jax: ["input/TeX","output/HTML-CSS"],
        //tex2jax: {inlineMath: [['$','$']]},
        //displayAlign: "center",
        TeX: {
            equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js"],
            Macros: {
                "*": "{\\dagger}",
                "ra": "{\\rangle}",
                "la": "{\\langle}",
                // matchcal version
                mcG: "{\\mathcal{G}}",
                mcR: "{\\mathcal{R}}",
                mcS: "{\\mathcal{S}}",
                mcC: "{\\mathcal{C}}",
                mcO: "{\\mathcal{O}}",
                // acronyms
                KS: "{\\text{KS}}",
                QP: "{\\text{QP}}",
                BZ: "{\\text{BZ}}",
                sign: "{\\text{sign}}",
                xc: "{\\text{xc}}",
                tchi: "{\\tilde\\chi}",
                // symbols commonly used
                rr: "{\\bf r}",
                RR: "{\\bf R}",
                tt: "{\\bf t}",
                GG: "{\\bf G}",
                kk: "{\\bf k}",
                qq: "{\\bf q}",
                kq: "{\\kk + \\qq}",
                qG: "{\\bf q + G}",
                kmq: "{\\kk - \\qq}",
                kpq: "{\\kk + \\qq}",
                kpG: "{\\kk + \\GG}",
                qpG: "{\\qq + \\GG}",
                // Many-body theory
                Go: "{G_0}",
                Wo: "{W_0}",
                Ueff: "{U_{\\text{eff}}}",
                // greek symbols + tilde version
                ee: "{\\epsilon}",
                tee: "{\\tilde{\\epsilon}}",
                ww: "{\\omega}",
                tww: "{\\tilde\\omega}",
                dd: "{\\,\\text{d}}",
                vxc: "{v_\\xc}",
                // symrel
                Ri: "{\\mcR^{-1}}",
                Rit: "{\\mcR^{-1\\tau}}",
                // symrec
                Si: "{\\mcS^{-1}}}",
                Sit: "{\\Si^\\tau}}",
                // partial and functional derivative.
                PDER: ["{\\dfrac{\\partial #1}{\\partial #2}}", 2],
                FDER: ["{\\dfrac{\\delta #1}{\\delta #2}}", 2],
                // PAW
                tPsi: "{\\tilde\\Psi}",
                tpsi: "{\\tilde\\psi}",
                tPhi: "{\\tilde\\Phi}",
                tphi: "{\\tilde\\phi}",
                tprj: "{\\tilde p}"
            }
          }
      });
    </script>

    <!-- See http://docs.mathjax.org/en/latest/start.html 
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js", "MathMenu.js", "MathZoom.js"],
        jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    -->

    
    
    

    <!-- Introjs for Guided Tour -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/intro.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/introjs.min.css" />

    <!-- Load fonts used for input variables -->
    <!--
    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/gallery.css">
    
      <link rel="stylesheet" href="../../css/my_codehilite.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#lesson-tdepes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.abinit.org" title="abinit" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo-abinit-2015.png" width="48" height="48">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Lessons
                </span>
              
                <span class="md-header-nav__parent">
                  EPH
                </span>
              
            
            Tdepes
          
        </span>
      </div>
      <!-- Guided Tour with introjs. Add glow effect to button only if homepage -->
      <div class="md-flex__cell md-flex__cell--shrink">
           
          
          <a href="#" class="btn btn-xs btn-default  " id="guided-tour-button" title="Guided Tour" 
              onclick="abidocs_guidedtour()">
           <span class="fa fa-info-circle"></span></a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/abinit/abinit/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      github-abinit
    </div>
  </a>

          </div>
        </div>
      
      <div class="md-flex__cell md-flex__cell--shrink" id="previous_published_versions">
        <div class="dropdown">
          <button class="btn btn-basic btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
            8.8.4
          <span class="caret"></span></button>
          <ul class="dropdown-menu">
            
          </ul>
        </div>
      </div>

    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." title="User Guide" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../topics/features/" title="Topics" class="md-tabs__link">
          Topics
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../variables/" title="Variables" class="md-tabs__link">
          Variables
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Lessons" class="md-tabs__link md-tabs__link--active">
          Lessons
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../theory/geometry/" title="Theory" class="md-tabs__link">
          Theory
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../developers/abimkdocs/" title="Developers" class="md-tabs__link">
          Developers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/release-notes/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/logo-abinit-2015.png" width="24" height="24">
      
    </span>
    abinit
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/abinit/abinit/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      github-abinit
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../.." title="NewUser" class="md-nav__link">
      NewUser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/abinit/" title="Abinit" class="md-nav__link">
      Abinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/aim/" title="Aim" class="md-nav__link">
      Aim
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/anaddb/" title="Anaddb" class="md-nav__link">
      Anaddb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/cut3d/" title="Cut3d" class="md-nav__link">
      Cut3d
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/fold2bloch/" title="Fold2Bloch" class="md-nav__link">
      Fold2Bloch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/mrgddb/" title="Mrgddb" class="md-nav__link">
      Mrgddb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/mrgscr/" title="Mrgscr" class="md-nav__link">
      Mrgscr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/respfn/" title="Respfn" class="md-nav__link">
      Respfn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/spacegroup/" title="Spacegroup" class="md-nav__link">
      Spacegroup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-12" type="checkbox" id="nav-1-12">
    
    <label class="md-nav__link" for="nav-1-12">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-12">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/" title="HowTo" class="md-nav__link">
      HowTo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../README_MacOSX/" title="MacOSX" class="md-nav__link">
      MacOSX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../README_gpu/" title="GPUs" class="md-nav__link">
      GPUs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../README_xlf/" title="Xlf" class="md-nav__link">
      Xlf
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Topics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Topics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/" title="Topic List" class="md-nav__link">
      Topic List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Abipy/" title="Abipy" class="md-nav__link">
      Abipy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/APPA/" title="APPA" class="md-nav__link">
      APPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Artificial/" title="Artificial" class="md-nav__link">
      Artificial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/AtomManipulator/" title="AtomManipulator" class="md-nav__link">
      AtomManipulator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/AtomTypes/" title="AtomTypes" class="md-nav__link">
      AtomTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Bader/" title="Bader" class="md-nav__link">
      Bader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Band2eps/" title="Band2eps" class="md-nav__link">
      Band2eps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Berry/" title="Berry" class="md-nav__link">
      Berry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/BandOcc/" title="BandOcc" class="md-nav__link">
      BandOcc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/BSE/" title="BSE" class="md-nav__link">
      BSE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ConstrainedPol/" title="ConstrainedPol" class="md-nav__link">
      ConstrainedPol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Control/" title="Control" class="md-nav__link">
      Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Coulomb/" title="Coulomb" class="md-nav__link">
      Coulomb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/CRPA/" title="CRPA" class="md-nav__link">
      CRPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/crystal/" title="Crystal" class="md-nav__link">
      Crystal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DFT+U/" title="DFT+U" class="md-nav__link">
      DFT+U
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DeltaSCF/" title="DeltaSCF" class="md-nav__link">
      DeltaSCF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DensityPotential/" title="DensityPotential" class="md-nav__link">
      DensityPotential
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Dev/" title="Dev" class="md-nav__link">
      Dev
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DFPT/" title="DFPT" class="md-nav__link">
      DFPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DMFT/" title="DMFT" class="md-nav__link">
      DMFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/EffMass/" title="EffMass" class="md-nav__link">
      EffMass
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/EFG/" title="EFG" class="md-nav__link">
      EFG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Elastic/" title="Elastic" class="md-nav__link">
      Elastic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElPhonInt/" title="ElPhonInt" class="md-nav__link">
      ElPhonInt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElPhonTransport/" title="ElPhonTransport" class="md-nav__link">
      ElPhonTransport
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElecDOS/" title="ElecDOS" class="md-nav__link">
      ElecDOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElecBandStructure/" title="ElecBandStructure" class="md-nav__link">
      ElecBandStructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/FileFormats/" title="FileFormats" class="md-nav__link">
      FileFormats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ForcesStresses/" title="ForcesStresses" class="md-nav__link">
      ForcesStresses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/FrequencyMeshMBPT/" title="FrequencyMeshMBPT" class="md-nav__link">
      FrequencyMeshMBPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GeoConstraints/" title="GeoConstraints" class="md-nav__link">
      GeoConstraints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GeoOpt/" title="GeoOpt" class="md-nav__link">
      GeoOpt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Git/" title="Git" class="md-nav__link">
      Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GSintroduction/" title="GSintroduction" class="md-nav__link">
      GSintroduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GW/" title="GW" class="md-nav__link">
      GW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GWls/" title="GWls" class="md-nav__link">
      GWls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Hybrids/" title="Hybrids" class="md-nav__link">
      Hybrids
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/k-points/" title="K points" class="md-nav__link">
      K points
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/LDAminushalf/" title="LDAminushalf" class="md-nav__link">
      LDAminushalf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/LOTF/" title="LOTF" class="md-nav__link">
      LOTF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/MagField/" title="MagField" class="md-nav__link">
      MagField
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/MagMom/" title="MagMom" class="md-nav__link">
      MagMom
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/MolecularDynamics/" title="MolecularDynamics" class="md-nav__link">
      MolecularDynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/multidtset/" title="Multidtset" class="md-nav__link">
      Multidtset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/nonlinear/" title="Nonlinear" class="md-nav__link">
      Nonlinear
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Output/" title="Output" class="md-nav__link">
      Output
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/parallelism/" title="Parallelism" class="md-nav__link">
      Parallelism
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PAW/" title="PAW" class="md-nav__link">
      PAW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PIMD/" title="PIMD" class="md-nav__link">
      PIMD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Planewaves/" title="Planewaves" class="md-nav__link">
      Planewaves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Phonons/" title="Phonons" class="md-nav__link">
      Phonons
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PhononBands/" title="PhononBands" class="md-nav__link">
      PhononBands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PhononWidth/" title="PhononWidth" class="md-nav__link">
      PhononWidth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PortabilityNonRegression/" title="PortabilityNonRegression" class="md-nav__link">
      PortabilityNonRegression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/positron/" title="Positron" class="md-nav__link">
      Positron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/printing/" title="Printing" class="md-nav__link">
      Printing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PseudosPAW/" title="PseudosPAW" class="md-nav__link">
      PseudosPAW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/q-points/" title="Q points" class="md-nav__link">
      Q points
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/RandStopPow/" title="RandStopPow" class="md-nav__link">
      RandStopPow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Recursion/" title="Recursion" class="md-nav__link">
      Recursion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/RPACorrEn/" title="RPACorrEn" class="md-nav__link">
      RPACorrEn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SCFControl/" title="SCFControl" class="md-nav__link">
      SCFControl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SCFAlgorithms/" title="SCFAlgorithms" class="md-nav__link">
      SCFAlgorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SelfEnergy/" title="SelfEnergy" class="md-nav__link">
      SelfEnergy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SmartSymm/" title="SmartSymm" class="md-nav__link">
      SmartSymm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/spinpolarisation/" title="Spinpolarisation" class="md-nav__link">
      Spinpolarisation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/STM/" title="STM" class="md-nav__link">
      STM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Susceptibility/" title="Susceptibility" class="md-nav__link">
      Susceptibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TDDFT/" title="TDDFT" class="md-nav__link">
      TDDFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TDepES/" title="TDepES" class="md-nav__link">
      TDepES
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Temperature/" title="Temperature" class="md-nav__link">
      Temperature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TransPath/" title="TransPath" class="md-nav__link">
      TransPath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TuningSpeed/" title="TuningSpeed" class="md-nav__link">
      TuningSpeed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Unfolding/" title="Unfolding" class="md-nav__link">
      Unfolding
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/UnitCell/" title="UnitCell" class="md-nav__link">
      UnitCell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/vdw/" title="Vdw" class="md-nav__link">
      Vdw
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Verification/" title="Verification" class="md-nav__link">
      Verification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Wannier/" title="Wannier" class="md-nav__link">
      Wannier
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Wavelets/" title="Wavelets" class="md-nav__link">
      Wavelets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/xc/" title="Xc" class="md-nav__link">
      Xc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/external_resources/" title="External Resources" class="md-nav__link">
      External Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Variables
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Variables
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/" title="All Variables" class="md-nav__link">
      All Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Abinit
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Abinit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/basic/" title="Basic" class="md-nav__link">
      Basic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/bse/" title="Bethe-Salpeter" class="md-nav__link">
      Bethe-Salpeter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/dev/" title="Developers" class="md-nav__link">
      Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/dmft/" title="DMFT" class="md-nav__link">
      DMFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/eph/" title="Electron-Phonon" class="md-nav__link">
      Electron-Phonon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/ffield/" title="Varff" class="md-nav__link">
      Varff
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/files/" title="File-handling" class="md-nav__link">
      File-handling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/geo/" title="Geometry" class="md-nav__link">
      Geometry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/gstate/" title="Ground-State" class="md-nav__link">
      Ground-State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/gw/" title="GW" class="md-nav__link">
      GW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/internal/" title="Internal" class="md-nav__link">
      Internal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/paral/" title="Parallelism" class="md-nav__link">
      Parallelism
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/paw/" title="PAW" class="md-nav__link">
      PAW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/dfpt/" title="DFPT" class="md-nav__link">
      DFPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/rlx/" title="Relaxation" class="md-nav__link">
      Relaxation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/vdw/" title="VdW" class="md-nav__link">
      VdW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/w90/" title="Wannier90" class="md-nav__link">
      Wannier90
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/anaddb/" title="Anaddb" class="md-nav__link">
      Anaddb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/aim/" title="Aim" class="md-nav__link">
      Aim
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/external_parameters/" title="External Parameters" class="md-nav__link">
      External Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/varset_stats/" title="Statistics" class="md-nav__link">
      Statistics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Lessons
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Lessons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Base Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Base Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../base1/" title="Base1" class="md-nav__link">
      Base1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../base2/" title="Base2" class="md-nav__link">
      Base2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../base3/" title="Base3" class="md-nav__link">
      Base3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../base4/" title="Base4" class="md-nav__link">
      Base4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spin/" title="Spin" class="md-nav__link">
      Spin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      PAW
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        PAW
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../paw1/" title="PAW1" class="md-nav__link">
      PAW1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paw2/" title="PAW2" class="md-nav__link">
      PAW2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paw3/" title="PAW3" class="md-nav__link">
      PAW3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      DFT_PLUS_U
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        DFT_PLUS_U
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../dftu/" title="Dftu" class="md-nav__link">
      Dftu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../udet/" title="Udet" class="md-nav__link">
      Udet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ucalc_crpa/" title="Ucalc crpa" class="md-nav__link">
      Ucalc crpa
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      DFPT
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        DFPT
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rf1/" title="RF1" class="md-nav__link">
      RF1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rf2/" title="RF2" class="md-nav__link">
      RF2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../elastic/" title="Elastic" class="md-nav__link">
      Elastic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ffield/" title="Ffield" class="md-nav__link">
      Ffield
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nlo/" title="Nlo" class="md-nav__link">
      Nlo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dmft/" title="DMFT" class="md-nav__link">
      DMFT
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7" checked>
    
    <label class="md-nav__link" for="nav-4-7">
      EPH
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        EPH
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eph/" title="Eph" class="md-nav__link">
      Eph
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Tdepes
      </label>
    
    <a href="./" title="Tdepes" class="md-nav__link md-nav__link--active">
      Tdepes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#temperature-dependence-of-the-electronic-structure" title="Temperature-DEPendence of the Electronic Structure." class="md-nav__link">
    Temperature-DEPendence of the Electronic Structure.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-calculation-of-the-zpr-of-eigenenergies-at-q" title="1 Calculation of the ZPR of eigenenergies at q=Γ." class="md-nav__link">
    1 Calculation of the ZPR of eigenenergies at q=Γ.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-converging-the-calculation-with-respect-to-the-grid-of-phonon-wavevectors" title="2 Converging the calculation with respect to the grid of phonon wavevectors" class="md-nav__link">
    2 Converging the calculation with respect to the grid of phonon wavevectors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-calculation-of-the-eigenenergy-corrections-along-high-symmetry-lines" title="3 Calculation of the eigenenergy corrections along high-symmetry lines" class="md-nav__link">
    3 Calculation of the eigenenergy corrections along high-symmetry lines
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Many-Body
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Many-Body
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gw1/" title="GW1" class="md-nav__link">
      GW1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gw2/" title="GW2" class="md-nav__link">
      GW2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bse/" title="Bethe-Salpeter" class="md-nav__link">
      Bethe-Salpeter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-9" type="checkbox" id="nav-4-9">
    
    <label class="md-nav__link" for="nav-4-9">
      Parallelism
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-9">
        Parallelism
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../basepar/" title="Base" class="md-nav__link">
      Base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_gspw/" title="GSPW" class="md-nav__link">
      GSPW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_gswvl/" title="GSWVL" class="md-nav__link">
      GSWVL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_dfpt/" title="DFPT" class="md-nav__link">
      DFPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_images/" title="Images" class="md-nav__link">
      Images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_mbt/" title="Many-Body" class="md-nav__link">
      Many-Body
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_moldyn/" title="Moldyn" class="md-nav__link">
      Moldyn
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../analysis_tools/" title="Analysis tools" class="md-nav__link">
      Analysis tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fold2bloch/" title="Fold2bloch" class="md-nav__link">
      Fold2bloch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nuc/" title="Nuc" class="md-nav__link">
      Nuc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../positron/" title="Positron" class="md-nav__link">
      Positron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../source_code/" title="Source code" class="md-nav__link">
      Source code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tddft/" title="Tddft" class="md-nav__link">
      Tddft
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wannier90/" title="Wannier90" class="md-nav__link">
      Wannier90
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Theory
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Theory
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/geometry/" title="Geometry" class="md-nav__link">
      Geometry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/spherical_harmonics/" title="Spherical Harmonics" class="md-nav__link">
      Spherical Harmonics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/wavefunctions/" title="Wavefunctions" class="md-nav__link">
      Wavefunctions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/noncollinear/" title="Noncollinear" class="md-nav__link">
      Noncollinear
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/pseudopotentials/" title="Pseudopotentials" class="md-nav__link">
      Pseudopotentials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/mbt/" title="Many-Body Perturbation Theory" class="md-nav__link">
      Many-Body Perturbation Theory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/bse/" title="Bethe-Salpeter" class="md-nav__link">
      Bethe-Salpeter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/documents/" title="Documents" class="md-nav__link">
      Documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/acknowledgments/" title="Acknowledgments" class="md-nav__link">
      Acknowledgments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/bibliography/" title="Bibliography" class="md-nav__link">
      Bibliography
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/abimkdocs/" title="Abimkdocs" class="md-nav__link">
      Abimkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/testsuite/" title="Test Suite" class="md-nav__link">
      Test Suite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4">
    
    <label class="md-nav__link" for="nav-6-4">
      Pseudos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        Pseudos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp1_info/" title="psp1" class="md-nav__link">
      psp1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp3_info/" title="psp3" class="md-nav__link">
      psp3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp45_info/" title="psp45" class="md-nav__link">
      psp45
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp5spinorbit_info/" title="psp5" class="md-nav__link">
      psp5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp6_info/" title="psp6" class="md-nav__link">
      psp6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp8_info/" title="psp8" class="md-nav__link">
      psp8
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/codestats/" title="Code stats" class="md-nav__link">
      Code stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/autoconf_examples/" title="Autoconf_examples" class="md-nav__link">
      Autoconf_examples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/release-notes/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#temperature-dependence-of-the-electronic-structure" title="Temperature-DEPendence of the Electronic Structure." class="md-nav__link">
    Temperature-DEPendence of the Electronic Structure.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-calculation-of-the-zpr-of-eigenenergies-at-q" title="1 Calculation of the ZPR of eigenenergies at q=Γ." class="md-nav__link">
    1 Calculation of the ZPR of eigenenergies at q=Γ.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-converging-the-calculation-with-respect-to-the-grid-of-phonon-wavevectors" title="2 Converging the calculation with respect to the grid of phonon wavevectors" class="md-nav__link">
    2 Converging the calculation with respect to the grid of phonon wavevectors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-calculation-of-the-eigenenergy-corrections-along-high-symmetry-lines" title="3 Calculation of the eigenenergy corrections along high-symmetry lines" class="md-nav__link">
    3 Calculation of the eigenenergy corrections along high-symmetry lines
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              

                
                  <a href="https://github.com/abinit/abinit/edit/master/doc/tutorial/tdepes.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="lesson-tdepes">Lesson TDepES<a class="headerlink" href="#lesson-tdepes" title="Permanent link">&para;</a></h1>
<h2 id="temperature-dependence-of-the-electronic-structure">Temperature-DEPendence of the Electronic Structure.<a class="headerlink" href="#temperature-dependence-of-the-electronic-structure" title="Permanent link">&para;</a></h2>
<p>This lesson aims at showing how to get the following physical properties, for periodic solids:</p>
<ul>
<li>
<p>The zero-point-motion renormalization (ZPR) of eigenenergies  </p>
</li>
<li>
<p>The temperature-dependence of eigenenergies  </p>
</li>
<li>
<p>The lifetime/broadening of eigenenergies  </p>
</li>
</ul>
<p>It should take about 1 hour.</p>
<p>For the theory related to the temperature-dependent calculations, please read
the following papers: <a class="wikilink citation-wikilink" data-content="Temperature dependence of the electronic structure of semiconductors and insulators" data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../theory/bibliography#ponce2015">[Ponce2015]</a>, <a class="wikilink citation-wikilink" data-content="Verification of first-principles codes: Comparison of total energies, phonon frequencies, electron–phonon coupling and zero-point motion correction to the gap between ABINIT and QE/Yambo" data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../theory/bibliography#ponce2014">[Ponce2014]</a> and <a class="wikilink citation-wikilink" data-content="Temperature dependence of electronic eigenenergies in the adiabatic harmonic approximation" data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../theory/bibliography#ponce2014a">[Ponce2014a]</a>.</p>
<p>There are two ways to compute the temperature dependence with Abinit:</p>
<ul>
<li>
<p><strong>Using Anaddb</strong>: historically the first implementation. This option does not require Netcdf.</p>
</li>
<li>
<p><strong>Using post-processing python scripts</strong>: this is the recommended approach as it provides more options 
    and is more efficient (less disk space, less memory demanding). This option 
    <strong>requires Netcdf</strong> (both in Abinit and python). In this tutorial, we only focus on the netCDF-based approach.</p>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In order to run the python script you need:</p>
<ul>
<li>python 2.7.6 or higher, python3 is not supported</li>
<li>numpy 1.7.1 or higher </li>
<li>netCDF4 and netCDF4 for python </li>
<li>scipy 0.12.0 or higher </li>
</ul>
<p>Abinit must be configured with: <code class="codehilite">configure --with-config-file=myconf.ac</code>
where the configuration file must contain at least:</p>
<div class="codehilite"><pre><span></span>with_trio_flavor=&quot;netcdf+other-options&quot;

# To link against an external libs, use
#with_netcdf_incs=&quot;-I<span class="cp">${</span><span class="n">HOME</span><span class="cp">}</span>/local/include&quot;

# if (netcdf4 + hdf5):
#with_netcdf_libs=&quot;-L/usr/local/lib -lnetcdff -lnetcdf -L<span class="cp">${</span><span class="n">HOME</span><span class="cp">}</span>/local/lib -lhdf5_hl -lhdf5&quot;  
# else if netcdf3:
#with_netcdf_libs=&quot;-L<span class="cp">${</span><span class="n">HOME</span><span class="cp">}</span>/local/lib/ -lnetcdff -lnetcdf&quot;
</pre></div>


<p>A list of configuration files for clusters is available in the 
<a href="https://github.com/abinit/abiconfig">abiconfig repository</a></p>
<p>If you have a prebuilt abinit executable, use:</p>
<div class="codehilite"><pre><span></span>./abinit -b
</pre></div>


<p>to get the list of libraries/options activated in the build.
You should see netcdf in the <code class="codehilite">TRIO flavor</code> section:</p>
<div class="codehilite"><pre><span></span> === Connectors / Fallbacks ===
  Connectors on : yes
  Fallbacks on  : yes
  DFT flavor    : libxc-fallback
  FFT flavor    : none
  LINALG flavor : netlib-fallback
  MATH flavor   : none
  TIMER flavor  : abinit
  TRIO flavor   : netcdf
</pre></div>


</div>
<h2 id="1-calculation-of-the-zpr-of-eigenenergies-at-q">1 Calculation of the ZPR of eigenenergies at q=Γ.<a class="headerlink" href="#1-calculation-of-the-zpr-of-eigenenergies-at-q" title="Permanent link">&para;</a></h2>
<p>The reference input files for this lesson are located in
~abinit/tests/tutorespfn/Input and the corresponding reference output files
are in ~abinit/tests/tutorespfn/Refs.
The prefix for files is <strong>tdepes</strong>. As usual, we use the shorthand <code class="codehilite">~abinit</code> to indicate
the root directory where the abinit package has been deployed, but most often
consider the paths relative to this directory.</p>
<p>First, examine the <a class="wikilink abifile-wikilink" data-content="Temperature dependence calculation of diamond." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/tutorespfn/Input/tdepes_1.in" target="_blank">tests/tutorespfn/Input/tdepes_1.in</a> input file.
<div class="text-center"><button type="button" id="uuid-4362bcd9-1a52-49a9-a7cf-7b613b2f559d" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_1.in
</button></div>
<div id="uuid-581dc1d2-e04b-4601-a306-e8af114a2d40" class="my_dialog" title="tests/tutorespfn/Input/tdepes_1.in" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># C in diamond structure. </span>
 ndtset <span class="m">3</span>
 elph2_imagden <span class="m">0</span>.1 eV   <span class="c1"># Imaginary shift of the denominator of the sum-over-states </span>
                        <span class="c1"># in the perturbation denominator. Usual value is 0.1 eV to reproduce</span>
                        <span class="c1"># experimental broadening at 300K. Increasing the value help the </span>
                        <span class="c1"># convergence with respect to the number of q-points. </span>
 ngkpt <span class="m">2</span> <span class="m">2</span> <span class="m">2</span>            <span class="c1"># Underconverged : k-grid should be at least 4x4x4 for diamond to be converged.</span>
 nshiftk <span class="m">1</span>
 shiftk <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0</p>
<p><span class="c1"># Ground state density</span>
 tolvrs1  <span class="m">1</span>.0d-8      <span class="c1"># Underconverged : tolvrs 1.0d-18 should be used for converged results</span></p>
<p><span class="c1"># Non self-consistent calculation with an arbitrary q point (here Gamma)</span>
 getden2  <span class="m">1</span>
 iscf2   -2
 nqpt2    <span class="m">1</span>
 qpt2     <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
 nbdbuf2  <span class="m">2</span>
 tolwfr2  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span></p>
<p><span class="c1"># Computation at Gamma</span>
 getwfk3  <span class="m">1</span>
 getwfq3  <span class="m">2</span>
 nqpt3    <span class="m">1</span>
 qpt3     <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Calculation at Gamma</span>
 ieig2rf3 <span class="m">5</span>            <span class="c1"># Static eigenvalues corrections using DFPT (Sternheimer)</span>
 smdelta3 <span class="m">1</span>            <span class="c1"># Flag required to produce the _EIGI2D used to </span>
                       <span class="c1"># compute the lifetime of electronic levels.</span>
                       <span class="c1"># smdelta = 1 ==&gt; Fermi-Dirac smearing.</span>
 nbdbuf3  <span class="m">2</span>            <span class="c1"># 2 buffer bands. RF converges much faster.</span>
 rfphon3  <span class="m">1</span>            <span class="c1"># Do phonon response</span>
 rfatpol3 <span class="m">1</span> <span class="m">2</span>          <span class="c1"># Treat displacements of all atoms</span>
 rfdir3   <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>        <span class="c1"># Do all directions </span>
 tolwfr3  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt3  <span class="m">3</span></p>
<p><span class="c1"># Cell dependent parameters</span>
 acell <span class="m">3</span>*6.675
 rprim <span class="m">0</span> .5 .5 .5 <span class="m">0</span> .5 .5 .5 <span class="m">0</span>
 nsym <span class="m">1</span>                <span class="c1"># Disable symmetries. Symmetries are not yet in production.</span>
 natom <span class="m">2</span>
 typat <span class="m">1</span> <span class="m">1</span>
 xred <span class="m">3</span>*0.0 <span class="m">3</span>*0.25
 nband <span class="m">12</span>
 ntypat <span class="m">1</span>
 znucl <span class="m">6</span>
 diemac <span class="m">6</span>
 ecut <span class="m">10</span>              <span class="c1"># Underconverged ecut. </span>
 enunit <span class="m">2</span>
 nstep <span class="m">50</span>
 istwfk *1</p>
<p><span class="c1">## After modifying the following section, one might need to regenerate the pickle database with runtests.py -r</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% need_cpp_vars = HAVE_NETCDF</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% files_to_test = </span>
<span class="c1">#%%   tdepes_1.out,  tolnlines= 20, tolabs=  5.000e-05, tolrel=  5.000e-04, fld_options=-medium</span>
<span class="c1">#%% psp_files =  6c.pspnc</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 2</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = S. Ponc\&#39;e</span>
<span class="c1">#%% keywords = NC, DFPT, EPH</span>
<span class="c1">#%% description = Temperature dependence calculation of diamond.</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div></p>
<script> $(function() { abidocs_jqueryui_dialog("#uuid-581dc1d2-e04b-4601-a306-e8af114a2d40", "#uuid-4362bcd9-1a52-49a9-a7cf-7b613b2f559d") }); </script>

<p>Note that there are three datasets (<a class="wikilink codevar-wikilink" href="../../variables/basic#ndtset">ndtset</a>=3). The first dataset corresponds to a standard
self-consistent calculation, with an unshifted eight k-point grid, 
producing e.g. the ground-state eigenvalue file tdepes_1o_DS1_EIG.nc ,
as well as the density file tdepes_1o_DS1_DEN. The latter is read (<a class="wikilink codevar-wikilink" href="../../variables/files#getden">getden</a>2=1) 
to initiate the second dataset calculation,
which is a non-self-consistent run, specifically at the Gamma point only (there is no real recomputation
with respect to the dataset 1, it only extract a subset of the eight k-point grid).
This second dataset produces the wavefunction file tdepes_1o_DS2_WFQ, that is read by the third dataset (<a class="wikilink codevar-wikilink" href="../../variables/files#getwfq">getwfq</a>3=2),
as well as the tdepes_1o_DS1_WFK file from the first dataset (<a class="wikilink codevar-wikilink" href="../../variables/files#getwfk">getwfk</a>3=1).</p>
<p>The third dataset corresponds to a DFPT phonon calculation (<a class="wikilink codevar-wikilink" href="../../variables/dfpt#rfphon">rfphon</a>3=1) 
with displacement of all atoms (<a class="wikilink codevar-wikilink" href="../../variables/dfpt#rfatpol">rfatpol</a>3= 1 2) in all directions (<a class="wikilink codevar-wikilink" href="../../variables/dfpt#rfdir">rfdir</a>3= 1 1 1).
This induces the creation of the Derivative DataBase file tdepes_1o_DS3_DDB.
The electron-phonon matrix elements are produced because of <a class="wikilink codevar-wikilink" href="../../variables/dfpt#ieig2rf">ieig2rf</a>3=5 ,
this option generating the needed netCDF files tdepes_1o_DS3_EIGR2D.nc and tdepes_1o_DS3_GKK.nc .</p>
<p>We will use <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_1.files" target="_blank">tests/tutorespfn/Input/tdepes_1.files</a>, with minor modifications -see below-, to execute abinit.</p>
<div class="text-center"><button type="button" id="uuid-c42630d6-509e-4637-be99-026f7e2b09f1" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_1.files
</button></div>

<div id="uuid-54e9eb5f-fd49-40f9-9b14-d00abc61767b" class="my_dialog" title="tests/tutorespfn/Input/tdepes_1.files" hidden><div><pre class="small-text">
tdepes_1.in
tdepes_1.out
tdepes_1i
tdepes_1o
tdepes_1
../../Psps_for_tests/6c.pspnc

</pre>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-54e9eb5f-fd49-40f9-9b14-d00abc61767b", "#uuid-c42630d6-509e-4637-be99-026f7e2b09f1") }); </script>

<p>In order to run abinit, we suggest that you create a working directory, why not call it <code class="codehilite">Work</code>, 
as subdirectory of ~abinit/tests/tutorespfn/Input, then
copy/modify the relevant files. Explicitly:</p>
<div class="codehilite"><pre><span></span>cd ~abinit/tests/tutorespfn/Input
mkdir Work 
cd Work
cp ../tdepes*in ../tdepes*files .
</pre></div>


<p>Then, edit the <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_1.files" target="_blank">tests/tutorespfn/Input/tdepes_1.files</a> to modify location of the pseudopotential file
(from the Work subdirectory, the location is ../../../Psps_for_tests/6c.pspnc, although you might as well copy the
file 6c.pspnc in the Work directory, in which case the location is simply 6c.pspnc). 
Finally, issue    </p>
<div class="codehilite"><pre><span></span>abinit &lt; tdepes_1.files &gt; tdepes_1.stdout
</pre></div>


<p>(where <code class="codehilite">abinit</code> might have to be replaced by the proper location of the abinit executable, or by ./abinit if you have
copied abinit in the Work directory).</p>
<!--
### If Abinit is compiled with Netcdf...
-->

<p>If you have compiled the code with Netcdf, the calculation will produce 
several _EIG.nc,
_DDB, EIGR2D.nc and EIGI2D.nc files, that contain respectively the eigenvalues (GS or
perturbed), the second-order derivative of the total energy with respect to
two atomic displacements, the electron-phonon matrix elements used to compute
the renormalization of the eigenenergies and the electron-phonon matrix
elements used to compute the lifetime of the electronic states. </p>
<p>You can now copy three post-processing python files from
~abinit/scripts/post_processing/temperature-dependence .
Make sure you are in the directory containing the output files produced by the code and issue:</p>
<div class="codehilite"><pre><span></span>cp ~abinit/scripts/post_processing/temperature-dependence/temperature_final.py .
cp ~abinit/scripts/post_processing/temperature-dependence/rf_final.py .
cp ~abinit/scripts/post_processing/plot_bs.py .
</pre></div>


<p>in which ~abinit has been replaced by the proper path.</p>
<!--
as well as the python file
containing the required classes from ~abinit/scripts/post_processing/mrgeignc.py
into the directory where you did the calculations. 
-->

<p>You can then simply run the python script with the following command:</p>
<div class="codehilite"><pre><span></span>./temperature_final.py
</pre></div>


<p>and enter the information asked by the script, typically the following
(data contained in ~abinit/tests/tutorespfn/Input/tdepes_1_temperature.in):</p>
<div class="codehilite"><pre><span></span>1                          # Number of cpus 
2                          # Static ZPR computed in the Allen-Heine-Cardona theory
temperature_1              # Prefix for output files
0.1                        # Value of the smearing parameter for AHC (in eV)
0.1                        # Gaussian broadening for the Eliashberg function and PDOS (in eV)
0 0.5                      # Energy range for the PDOS and Eliashberg calculations (in eV)
0 1000 50                  # min, max temperature and temperature step
1                          # Number of Q-points we have (here we only computed $\Gamma$)
tdepes_1o_DS3_DDB          # Name of the response-funtion (RF) DDB file
tdepes_1o_DS2_EIG.nc       # Eigenvalues at $\mathbf{k+q}$
tdepes_1o_DS3_EIGR2D.nc    # Second-order electron-phonon matrix element 
tdepes_1o_DS3_GKK.nc       # Name of the 0 GKK file
tdepes_1o_DS1_EIG.nc       # Name of the unperturbed EIG.nc file with Eigenvalues at $k$
</pre></div>

<p>Alternatively, copy this example file in the Work directory if not yet done, and then run</p>
<div class="codehilite"><pre><span></span>./temperature_final.py &lt; tdepes_1_temperature.in
</pre></div>


<div class="text-center"><button type="button" id="uuid-8a29607a-1ccf-43af-8df5-9db39d18b3dc" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_1_temperature.in
</button></div>

<div id="uuid-44a2ea2b-f549-4e9a-9b98-8790e0cf5ea0" class="my_dialog" title="tests/tutorespfn/Input/tdepes_1_temperature.in" hidden><div><div class="codehilite small-text"><pre><span></span><span class="m">1</span>
<span class="m">2</span>
temperature_1
<span class="m">0</span>.1
<span class="m">0</span>.1
<span class="m">0</span> <span class="m">0</span>.5
<span class="m">0</span> <span class="m">1000</span> <span class="m">50</span>
<span class="m">1</span>
tdepes_1o_DS3_DDB
tdepes_1o_DS2_EIG.nc
tdepes_1o_DS3_EIGR2D.nc
tdepes_1o_DS3_GKK.nc
tdepes_1o_DS1_EIG.nc
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-44a2ea2b-f549-4e9a-9b98-8790e0cf5ea0", "#uuid-8a29607a-1ccf-43af-8df5-9db39d18b3dc") }); </script>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Remember to use py2.7 and install the libraries required by the script before running.</p>
<p>For pip, use:</p>
<div class="codehilite"><pre><span></span>pip install netcdf4
</pre></div>


<p>or:</p>
<div class="codehilite"><pre><span></span>conda install netcdf4
</pre></div>


<p>if you are using <a href="https://conda.io/miniconda.html">conda</a></p>
</div>
<p>You should see on the screen an output similar to:</p>
<div class="codehilite"><pre><span></span>Start on <span class="m">15</span>/3/2018 at 13h29

    ____  ____       _                                      _
   <span class="p">|</span>  _ <span class="se">\|</span>  _ <span class="se">\ </span>    <span class="p">|</span> <span class="p">|</span>_ ___ _ __ ___  _ __   ___ _ __ __ _<span class="p">|</span> <span class="p">|</span>_ _   _ _ __ ___
   <span class="p">|</span> <span class="p">|</span>_<span class="o">)</span> <span class="p">|</span> <span class="p">|</span>_<span class="o">)</span> <span class="p">|</span>____<span class="p">|</span> __/ _ <span class="se">\ </span><span class="s1">&#39;_ ` _ \| &#39;</span>_ <span class="se">\ </span>/ _ <span class="se">\ </span><span class="s1">&#39;__/ _` | __| | | | &#39;</span>__/ _ <span class="se">\</span>
   <span class="p">|</span>  __/<span class="p">|</span>  __/_____<span class="p">|</span> <span class="o">||</span>  __/ <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span>_<span class="o">)</span> <span class="p">|</span>  __/ <span class="p">|</span> <span class="p">|</span> <span class="o">(</span>_<span class="p">|</span> <span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span>  __/
   <span class="p">|</span>_<span class="p">|</span>   <span class="p">|</span>_<span class="p">|</span>         <span class="se">\_</span>_<span class="se">\_</span>__<span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> .__/ <span class="se">\_</span>__<span class="p">|</span>_<span class="p">|</span>  <span class="se">\_</span>_,_<span class="p">|</span><span class="se">\_</span>_<span class="p">|</span><span class="se">\_</span>_,_<span class="p">|</span>_<span class="p">|</span>  <span class="se">\_</span>__<span class="p">|</span>
                                      <span class="p">|</span>_<span class="p">|</span>                              Version <span class="m">1</span>.3

This script compute the static/dynamic zero-point motion
  and the temperature dependence of eigenenergies due to electron-phonon interaction.
  The electronic lifetime can also be computed.

  WARNING: The first Q-point MUST be the Gamma point.

Enter the number of cpu on which you want to multi-thread
Define the <span class="nb">type</span> of calculation you want to perform. Type:
                         <span class="m">1</span> <span class="k">if</span> you want to run a non-adiabatic AHC calculation
                         <span class="m">2</span> <span class="k">if</span> you want to run a static AHC calculation
                         <span class="m">3</span> <span class="k">if</span> you want to run a static AHC calculation without control on active space <span class="o">(</span>not recommended !<span class="o">)</span>
   Note that <span class="k">for</span> <span class="m">1</span> <span class="p">&amp;</span> <span class="m">2</span> you need _EIGR2D.nc and _GKK.nc files obtained through ABINIT option <span class="s2">&quot;ieig2rf 5&quot;</span>
Enter name of the output file
Enter value of the smearing parameter <span class="k">for</span> AHC <span class="o">(</span>in eV<span class="o">)</span>
Enter value of the Gaussian broadening <span class="k">for</span> the Eliashberg <span class="k">function</span> and PDOS <span class="o">(</span>in eV<span class="o">)</span>
Enter the energy range <span class="k">for</span> the PDOS and Eliashberg calculations <span class="o">(</span>in eV<span class="o">)</span>: <span class="o">[</span>e.g. <span class="m">0</span> <span class="m">0</span>.5<span class="o">]</span>
Introduce the min temperature, the max temperature and the temperature steps. e.g. <span class="m">0</span> <span class="m">200</span> <span class="m">50</span> <span class="k">for</span> <span class="o">(</span><span class="m">0</span>,50,100,150<span class="o">)</span>
Enter the number of Q-points you have
Enter the name of the <span class="m">0</span> DDB file
Enter the name of the <span class="m">0</span> eigq file
Enter the name of the <span class="m">0</span> EIGR2D file
Enter the name of the <span class="m">0</span> GKK file
Enter the name of the unperturbed EIG.nc file at Gamma
Q-point:  <span class="m">0</span>  with <span class="nv">wtq</span> <span class="o">=</span> <span class="m">1</span>.0  and reduced coord. <span class="o">[</span> <span class="m">0</span>.  <span class="m">0</span>.  <span class="m">0</span>.<span class="o">]</span>
Now compute active space ...
Now compute generalized g2F Eliashberg electron-phonon spectral <span class="k">function</span> ...
End on <span class="m">15</span>/3/2018 at <span class="m">13</span> h <span class="m">29</span>
Runtime: <span class="m">0</span> seconds <span class="o">(</span>or <span class="m">0</span>.0 minutes<span class="o">)</span>
</pre></div>

<p>The python code has generated the following files:</p>
<dl>
<dt><strong>temperature_1.txt</strong></dt>
<dd>This text file contains the zero-point motion renormalization (ZPR) at each k-point for each band. 
  It also contain the evolution of each band with temperature at k=<script type="math/tex">\Gamma</script>.
  At the end of the file, the Fan/DDW contribution is also reported. </dd>
<dt><strong>temperature_1_EP.nc</strong></dt>
<dd>This netcdf file contains a number for each k-point, 
  for each band and each temperature. The real part of this number is the ZPR correction 
  and the imaginary part is the lifetime. </dd>
</dl>
<!--
**temperature_BRD.txt** 
: This text file contains the lifetime of the electronic states 
  at each k-point for each band. It also contains the evolution of each band with temperature at k=$\Gamma$. 
-->

<p>We can for example visualize the temperature dependence at k=<script type="math/tex">\Gamma</script>  of the HOMO bands 
(<code class="codehilite"><span class="n">Band</span><span class="o">:</span> <span class="mi">3</span></code> section in the <strong>temperature_1.txt</strong> file, that you can examine) 
with the contribution of only q=<script type="math/tex">\Gamma</script>.</p>
<!--
![](tdepes_assets/plot1.png)

Here you can see that the HOMO correction goes down with temperature. This is
due to the use of underconvergence parameters. If you increase [[ecut]] from
5 to 10, you get the following plot.  
-->

<p><img alt="" src="../tdepes_assets/plot2.png" /></p>
<p>The HOMO eigenenergies correction goes up with temperature&hellip; You can
also plot the LUMO corrections and see that they go down. The
ZPR correction as well as their temperature dependence usually closes the gap
of semiconductors. </p>
<p>As usual, checking whether the input parameters give converged values is of course important.
The run used <a class="wikilink codevar-wikilink" href="../../variables/basic#ecut">ecut</a>=10. With the severely underestimated <a class="wikilink codevar-wikilink" href="../../variables/basic#ecut">ecut</a>=5, the HOMO correction goes down with temperature.</p>
<!--   OBSOLETE

### If Abinit is **not** compiled with Netcdf ...

In this case, we should first use [[help:mrgddb|mrgddb]] to merge the _DDB and _EIGR2D/_EIGI2D
but since we only have one q-point we do not have to perform this step. 
The static temperature dependence and the G2F can be computed thanks to anaddb
with the files file [[tests/tutorespfn/Input/tdepes_2.files]] and the input
file [[tests/tutorespfn/Input/tdepes_2.in]].

<div class="text-center"><button type="button" id="uuid-c59c36ce-7a1f-4ab6-8914-a456b141b578" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_2.files
</button></div>
<div id="uuid-4b3b4c6c-160d-4e08-aaa4-cfb64039d1a2" class="my_dialog" title="tests/tutorespfn/Input/tdepes_2.files" hidden><div><pre class="small-text">
tdepes_2.in
tdepes_2.out
tdepes_2i
tdepes_2o
tdepes_2
../../Psps_for_tests/6c.pspnc

</pre>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-4b3b4c6c-160d-4e08-aaa4-cfb64039d1a2", "#uuid-c59c36ce-7a1f-4ab6-8914-a456b141b578") }); </script>

The information contained in the files file can be understood by looking at the echo
if its reading in the standard output:

wzxhzdk:2

<div class="text-center"><button type="button" id="uuid-b6ce9e7f-b9d7-4abb-a55d-782aced5e315" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_2.in
</button></div>
<div id="uuid-0856e33b-612c-40aa-b72d-6678f7b9a230" class="my_dialog" title="tests/tutorespfn/Input/tdepes_2.in" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># This is the set of values that have been changed compared to the previous ABINIT run.</span>
ndtset <span class="m">1</span>
nstep <span class="m">0</span>    
prtvol -1              <span class="c1"># This is to stop immediately after computation of the set of k points</span>
ngkpt <span class="m">4</span> <span class="m">4</span> <span class="m">4</span>            <span class="c1"># The grid for which we try to compute the number of k points</span>
nshiftk <span class="m">1</span>
shiftk <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
nsym <span class="m">0</span>

<span class="c1"># C in diamond structure. </span>
 elph2_imagden <span class="m">0</span>.1 eV   <span class="c1"># Imaginary shift of the denominator of the sum-over-states </span>
                        <span class="c1"># in the perturbation denominator. Usual value is 0.1 eV to reproduce</span>
                        <span class="c1"># experimental broadening at 300K. Increasing the value help the </span>
                        <span class="c1"># convergence with respect to the number of q-points. </span>

<span class="c1"># Ground state density</span>
 tolvrs1  <span class="m">1</span>.0d-8      <span class="c1"># Underconverged : tolvrs 1.0d-18 should be used for converged results</span>

<span class="c1"># Non self-consistent calculation with an arbitrary q point (here Gamma)</span>
 getden2  <span class="m">1</span>
 iscf2   -2
 nqpt2    <span class="m">1</span>
 qpt2     <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
 nbdbuf2  <span class="m">2</span>
 tolwfr2  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>

<span class="c1"># Computation at Gamma</span>
 getwfk3  <span class="m">1</span>
 getwfq3  <span class="m">2</span>
 nqpt3    <span class="m">1</span>
 qpt3     <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Calculation at Gamma</span>
 ieig2rf3 <span class="m">5</span>            <span class="c1"># Static eigenvalues corrections using DFPT (Sternheimer)</span>
 smdelta3 <span class="m">1</span>            <span class="c1"># Flag required to produce the _EIGI2D used to </span>
                       <span class="c1"># compute the lifetime of electronic levels.</span>
                       <span class="c1"># smdelta = 1 ==&gt; Fermi-Dirac smearing.</span>
 nbdbuf3  <span class="m">2</span>            <span class="c1"># 2 buffer bands. RF converges much faster.</span>
 rfphon3  <span class="m">1</span>            <span class="c1"># Do phonon response</span>
 rfatpol3 <span class="m">1</span> <span class="m">2</span>          <span class="c1"># Treat displacements of all atoms</span>
 rfdir3   <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>        <span class="c1"># Do all directions </span>
 tolwfr3  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt3  <span class="m">3</span>

<span class="c1"># Cell dependent parameters</span>
 acell <span class="m">3</span>*6.675
 rprim <span class="m">0</span> .5 .5 .5 <span class="m">0</span> .5 .5 .5 <span class="m">0</span>
 natom <span class="m">2</span>
 typat <span class="m">1</span> <span class="m">1</span>
 xred <span class="m">3</span>*0.0 <span class="m">3</span>*0.25
 nband <span class="m">12</span>
 ntypat <span class="m">1</span>
 znucl <span class="m">6</span>
 diemac <span class="m">6</span>
 ecut <span class="m">10</span>              <span class="c1"># Underconverged ecut. </span>
 enunit <span class="m">2</span>
 istwfk *1

<span class="c1">## After modifying the following section, one might need to regenerate the pickle database with runtests.py -r</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% need_cpp_vars = HAVE_NETCDF</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% files_to_test = </span>
<span class="c1">#%%   tdepes_2.out,  tolnlines= 20, tolabs=  5.000e-05, tolrel=  5.000e-04, fld_options=-medium</span>
<span class="c1">#%% psp_files =  6c.pspnc</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 2</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = S. Ponc\&#39;e</span>
<span class="c1">#%% keywords = NC, DFPT, EPH</span>
<span class="c1">#%% description = Temperature dependence calculation of diamond. Quick determination of the k-point grid in the IBZ.</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-0856e33b-612c-40aa-b72d-6678f7b9a230", "#uuid-b6ce9e7f-b9d7-4abb-a55d-782aced5e315") }); </script>

As concern the anaddb input file, note that the electron-phonon analysis is triggered by
[[anaddb:thmflag]] 3, as well as [[anaddb:telphint]] 1 .

Launch anaddb by the command

    anaddb < tdepes_2.files > tdepes_2.stdout

(where `anaddb` might have to be replaced by the proper location of the anaddb executable).

The run will generate 3 files:

**tdepes_2.out_ep_G2F**
:  This g2F spectral function represents the contribution of the phononic modes of energy E 
   to the change of electronic eigenenergies according to the equation  

![](tdepes_assets/Eq1.png)


**tdepes_2.out_ep_PDS**
:  This file contains the phonon density of states 

**tdepes_2.out_ep_TBS**
:  This file contains the eigenenergy corrections as well 
   as the temperature dependence one. 
   You can check that the results are the same as with the python script approach here above. 


END OF OBSOLETE

-->

<h2 id="2-converging-the-calculation-with-respect-to-the-grid-of-phonon-wavevectors">2 Converging the calculation with respect to the grid of phonon wavevectors<a class="headerlink" href="#2-converging-the-calculation-with-respect-to-the-grid-of-phonon-wavevectors" title="Permanent link">&para;</a></h2>
<p>Convergence studies with respect to most of the parameters will rely on obvious modifications
of the input file detailed in the previous section. However, using more than one 
q-point phonon wavevector needs a non-trivial generalisation of this procedure.
This is because each q-point needs to be treated in a different dataset in the current version of ABINIT.</p>
<!--
From now on we will only describe the approach with Abinit **compiled with Netcdf support**. 
The approach with Anaddb is similar to what we described in the previous sections.
Note, however, that Anaddb only supports integration with homogenous q-point grids. 
-->

<p>The netCDF version can perform the q-wavevector integration either with random q-points or
homogenous Monkhorst-Pack meshes. 
Both grids have been used in the Ref. <a class="wikilink citation-wikilink" data-content="Verification of first-principles codes: Comparison of total energies, phonon frequencies, electron–phonon coupling and zero-point motion correction to the gap between ABINIT and QE/Yambo" data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../theory/bibliography#ponce2014">[Ponce2014]</a>, see e.g. Fig. 3 of this paper.</p>
<p>For the random integration method you
should create a script that generates random q-points, perform the Abinit
calculations at these points, gather the results and analyze them.
The temperature_final.py script will detect that you used random
integration thanks to the weight of the q-point stored in the _EIGR2D.nc file
and perform the integration accordingly.
The random integration converges slowly but in a consistent manner. </p>
<p>However, since this method is a little bit less user-friendly than the one based on homogeneous grids, 
we will focus on this homogenous integration. Even simpler, it is not trivial.
In this case, the user must specify in the ABINIT input file the homogeneous q-point grid, 
using input variables like
<a class="wikilink codevar-wikilink" href="../../variables/gstate#ngqpt">ngqpt</a>, <a class="wikilink codevar-wikilink" href="../../variables/gstate#qptopt">qptopt</a>, <a class="wikilink codevar-wikilink" href="../../variables/gstate#shiftq">shiftq</a>, <a class="wikilink codevar-wikilink" href="../../variables/gstate#nshiftq">nshiftq</a>, &hellip;, i.e. variables whose names
are similar to those used to specify the k-point grid (for electrons). </p>
<p>There are several difficulties here. 
First, since we focus on the k=<script type="math/tex">\Gamma</script> point, we expect to be able to use symmetries to decrease the computational
load, as <script type="math/tex">\Gamma</script> is invariant under all symmetry operations of the crystal. The symmetry operations of the crystal will be used
to decrease the number of q-wavevectors, but they cannot be used as well to decrease the k-point grid during the corresponding
self-consistent phonon computation.
How this different behaviour of k-grids and q-grids can be handled by ABINIT ?
By convention, in such case, with <a class="wikilink codevar-wikilink" href="../../variables/basic#nsym">nsym</a>=1 the k-point grid will be generated in the Full Brillouin zone,
without use of symmetries, while the q-point grid with <a class="wikilink codevar-wikilink" href="../../variables/gstate#qptopt">qptopt</a>=1 with be generated in the irreducible Brillouin Zone,
despite <a class="wikilink codevar-wikilink" href="../../variables/basic#nsym">nsym</a>=1. In order to generate q-point grids that are not folded in the irreducible Brillouin Zone, use another value of <a class="wikilink codevar-wikilink" href="../../variables/gstate#qptopt">qptopt</a>.
Especially <a class="wikilink codevar-wikilink" href="../../variables/gstate#qptopt">qptopt</a>=3 has to be used to generate q points in the full Brillouin zone.</p>
<p>Second, the number of ABINIT datasets is expected to be given in the input file, by the user,
but not determined on-the-flight by ABINIT. Still, this number of datasets is determined by the number of q points&hellip;
Thus, the user will have to compute it before being able to launch the real q-point calculations, since it determines <a class="wikilink codevar-wikilink" href="../../variables/basic#ndtset">ndtset</a>.</p>
<p>How to determine the number of irreducible q points ?</p>
<p>Well, the easiest procedure is to compute it for an equivalent k-point grid, by a quick run.</p>
<p>An example will clarify this.
Suppose that one is looking for the number of q-points corresponding to</p>
<div class="codehilite"><pre><span></span>ngqpt 4 4 4          
qptopt 1
nshiftq 1
shiftq 0.0 0.0 0.0
</pre></div>


<p>One make a quick ABINIT run with <a class="wikilink abifile-wikilink" data-content="Temperature dependence calculation of diamond. Quick determination of the k-point grid in the IBZ." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/tutorespfn/Input/tdepes_2.in" target="_blank">tests/tutorespfn/Input/tdepes_2.in</a>.
Note that several input variables have been changed with respect to <a class="wikilink abifile-wikilink" data-content="Temperature dependence calculation of diamond." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/tutorespfn/Input/tdepes_1.in" target="_blank">tests/tutorespfn/Input/tdepes_1.in</a>:</p>
<div class="codehilite"><pre><span></span>ndtset 1
nstep 0
prtebands 0
ngkpt 4 4 4            
nshiftk 1
shiftk 0.0 0.0 0.0
nsym 0
</pre></div>


<p>In this example, the new values of <a class="wikilink codevar-wikilink" href="../../variables/basic#ndtset">ndtset</a> and <a class="wikilink codevar-wikilink" href="../../variables/basic#nstep">nstep</a>, and the definition of <a class="wikilink codevar-wikilink" href="../../variables/gstate#prtebands">prtebands</a> 
allow a fast run (<a class="wikilink codevar-wikilink" href="../../variables/gstate#nline">nline</a>==0 might be specified as well,
or even, the run might be interrupted after a few seconds, since the number of k points is very quickly available). 
Then, the k-point grid is
specified thanks to <a class="wikilink codevar-wikilink" href="../../variables/basic#ngkpt">ngkpt</a>, <a class="wikilink codevar-wikilink" href="../../variables/basic#nshiftk">nshiftk</a>, <a class="wikilink codevar-wikilink" href="../../variables/basic#shiftk">shiftk</a>, replacing the corresponding input variables for the q-point
grid. The use of symmetries has been reenabled thanks to <a class="wikilink codevar-wikilink" href="../../variables/basic#nsym">nsym</a>=0.</p>
<p>After possibly modifying <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_2.files" target="_blank">tests/tutorespfn/Input/tdepes_2.files</a> to account for the location of the pseudopotential file, as above, issue:</p>
<div class="codehilite"><pre><span></span>abinit &lt; tdepes_2.files &gt; tdepes_2.stdout
</pre></div>


<p>Now, the number of points can be seen in the output file :</p>
<div class="codehilite"><pre><span></span>             nkpt           8
</pre></div>

<p>the list of these eight k-points being given in 
<div class="codehilite"><pre><span></span>              kpt      0.00000000E+00  0.00000000E+00  0.00000000E+00
                       2.50000000E-01  0.00000000E+00  0.00000000E+00
                       5.00000000E-01  0.00000000E+00  0.00000000E+00
                       2.50000000E-01  2.50000000E-01  0.00000000E+00
                       5.00000000E-01  2.50000000E-01  0.00000000E+00
                      -2.50000000E-01  2.50000000E-01  0.00000000E+00
                       5.00000000E-01  5.00000000E-01  0.00000000E+00
                      -2.50000000E-01  5.00000000E-01  2.50000000E-01
</pre></div></p>
<p>We are now ready to launch the determination of the
_EIG.nc, _DDB, EIGR2D.nc and EIGI2D.nc files, with 8 q-points.
As for the <script type="math/tex">\Gamma</script> calculation of the previous section, we will rely on three
datasets for each q-point. This permits a well-structured set of calculations,
although there is some redundancy. Indeed, the first of these datasets will correspond
to an unperturbed ground-state calculation identical for all q. It is done very quickly because
the converged wavefunctions are already available. The second dataset will correspond to
a non-self-consistent ground-state calculation at k+q (it is also quick thanks to previously available wavefunctions), 
and the third dataset will correspond to the DFPT calculations at k+q (this is the CPU intensive part) .</p>
<p>So, compared to the first run in this lesson, we have to replace   </p>
<div class="codehilite"><pre><span></span>ndtset 3     by      ndtset 24 udtset 8 3
</pre></div>


<p>in the input file <a class="wikilink abifile-wikilink" data-content="Temperature dependence calculation of diamond." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/tutorespfn/Input/tdepes_3.in" target="_blank">tests/tutorespfn/Input/tdepes_3.in</a>, and adjusted accordingly all input variables that were dataset-dependent. </p>
<div class="text-center"><button type="button" id="uuid-815b5b95-2cfc-4bf3-a588-987d3c0cfe89" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_3.in
</button></div>

<div id="uuid-197cb048-2a0c-4eae-8f31-965460be7c8d" class="my_dialog" title="tests/tutorespfn/Input/tdepes_3.in" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># C in diamond structure. </span>
 ndtset <span class="m">24</span> udtset <span class="m">8</span> <span class="m">3</span>
 iqpt:? <span class="m">1</span>               <span class="c1"># Index of the first q-point of this file (useful if you split your </span>
                        <span class="c1"># input files</span>

 elph2_imagden <span class="m">0</span>.1 eV   <span class="c1"># Imaginary shift of the denominator of the sum-over-states </span>
                        <span class="c1"># in the perturbation denominator. Usual value is 0.1 eV to reproduce</span>
                        <span class="c1"># experimental broadening at 300K. Increasing the value help the </span>
                        <span class="c1"># convergence with respect to the number of q-points. </span>
 ngkpt <span class="m">2</span> <span class="m">2</span> <span class="m">2</span>            <span class="c1"># Underconverged : k-grid should be at least 4x4x4 for diamond to be converged.</span>
 nshiftk <span class="m">1</span>
 shiftk <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
 ngqpt <span class="m">4</span> <span class="m">4</span> <span class="m">4</span>            <span class="c1"># Should be converged upon</span>
 qptopt <span class="m">1</span>
 nshiftq <span class="m">1</span>
 shiftq <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0

<span class="c1"># Ground state density</span>
 iqpt+?    <span class="m">1</span>
 tolvrs?1  <span class="m">1</span>.0d-8     <span class="c1"># Underconverged : tolvrs 1.0d-18 should be used for converged results</span>

<span class="c1"># Non self-consistent calculation with an arbitrary q point (here Gamma)</span>
 getden?2 -1
 iscf?2   -2
 nqpt?2    <span class="m">1</span>
 nbdbuf?2  <span class="m">2</span>
 tolwfr?2  <span class="m">1</span>.0d-8   <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>

<span class="c1"># Computation at Gamma</span>
 getwfk?3 -2
 getwfq?3 -1
 nqpt?3    <span class="m">1</span>
 ieig2rf?3 <span class="m">5</span>            <span class="c1"># Static eigenvalues corrections using DFPT (Sternheimer)</span>
 smdelta?3 <span class="m">1</span>            <span class="c1"># Flag required to produce the _EIGI2D used to </span>
                        <span class="c1"># compute the lifetime of electronic levels.</span>
                        <span class="c1"># smdelta = 1 ==&gt; Fermi-Dirac smearing.</span>
 nbdbuf?3  <span class="m">2</span>            <span class="c1"># 2 buffer bands. RF converges much faster.</span>
 rfphon?3  <span class="m">1</span>            <span class="c1"># Do phonon response</span>
 rfatpol?3 <span class="m">1</span> <span class="m">2</span>          <span class="c1"># Treat displacements of all atoms</span>
 rfdir?3   <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>        <span class="c1"># Do all directions </span>
 tolwfr?3  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt?3  <span class="m">3</span>

<span class="c1"># Cell dependent parameters</span>
 acell <span class="m">3</span>*6.675
 rprim <span class="m">0</span> .5 .5 .5 <span class="m">0</span> .5 .5 .5 <span class="m">0</span>
 nsym <span class="m">1</span>                <span class="c1"># Disable symmetries. Symmetries are not yet in production.</span>
 natom <span class="m">2</span>
 typat <span class="m">1</span> <span class="m">1</span>
 xred <span class="m">3</span>*0.0 <span class="m">3</span>*0.25
 nband <span class="m">12</span>
 ntypat <span class="m">1</span>
 znucl <span class="m">6</span>
 diemac <span class="m">6</span>
 ecut <span class="m">10</span>  
 enunit <span class="m">2</span>
 nstep <span class="m">50</span>
 istwfk *1

<span class="c1">## After modifying the following section, one might need to regenerate the pickle database with runtests.py -r</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% need_cpp_vars = HAVE_NETCDF</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% files_to_test = </span>
<span class="c1">#%%   tdepes_3.out,  tolnlines= 30, tolabs=  5.000e-05, tolrel=  5.000e-04, fld_options=-medium</span>
<span class="c1">#%% psp_files =  6c.pspnc</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 2</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = S. Ponc\&#39;e</span>
<span class="c1">#%% keywords = NC, DFPT, EPH</span>
<span class="c1">#%% description = Temperature dependence calculation of diamond.</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-197cb048-2a0c-4eae-8f31-965460be7c8d", "#uuid-815b5b95-2cfc-4bf3-a588-987d3c0cfe89") }); </script>

<p>Please, refer to the 
<a class="wikilink user-guide-wikilink" href="../../guide/abinit#35-defining-a-double-loop-dataset">explanation of the usage of a double-loop of datasets</a>
if you are confused about the meaning of <a class="wikilink codevar-wikilink" href="../../variables/basic#udtset">udtset</a>, and the usage of the corresponding metacharacters.
We have indeed also introduced </p>
<div class="codehilite"><pre><span></span>iqpt:? 1
iqpt+? 1
</pre></div>


<p>that translates into </p>
<div class="codehilite"><pre><span></span>iqpt11 1
iqpt12 1
iqpt13 1
iqpt21 2
iqpt22 2
iqpt23 2
iqpt31 3
 ...
</pre></div>


<p>allowing to perform calculations for three datasets at each q-point.</p>
<p>After possibly modifying <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_3.files" target="_blank">tests/tutorespfn/Input/tdepes_3.files</a> to account for the location of the pseudopotential file, as above, issue:</p>
<div class="codehilite"><pre><span></span>abinit &lt; tdepes_3.files &gt; tdepes_3.stdout
</pre></div>


<p>This is a significantly longer ABINIT run (still less than one minute), also producing many files.</p>
<p>When the run is finished, copy the file <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_3_temperature.in" target="_blank">tests/tutorespfn/Input/tdepes_3_temperature.in</a> in the 
working directory (if not yet done) and launch the python script with:</p>
<div class="codehilite"><pre><span></span>./temperature_final.py &lt; tdepes_3_temperature.in
</pre></div>


<div class="text-center"><button type="button" id="uuid-ef7c262e-e879-4a6e-b9ae-16039ee0866c" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_3.files
</button></div>

<div id="uuid-580ad6a3-7045-487b-8ec7-2958c33600b7" class="my_dialog" title="tests/tutorespfn/Input/tdepes_3.files" hidden><div><pre class="small-text">
tdepes_3.in
tdepes_3.out
tdepes_3i
tdepes_3o
tdepes_3
../../Psps_for_tests/6c.pspnc

</pre>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-580ad6a3-7045-487b-8ec7-2958c33600b7", "#uuid-ef7c262e-e879-4a6e-b9ae-16039ee0866c") }); </script>

<p>Examination of the same HOMO band at k=<script type="math/tex">\Gamma</script> for a 4x4x4 q-point grid gives a very different result
than previously. Indeed, for the ZPR, one finds</p>
<div class="codehilite"><pre><span></span><span class="n">Band</span><span class="o">:</span> <span class="mi">3</span>
<span class="mf">0.0</span> <span class="mf">0.154686616316</span>
</pre></div>


<p>instead of</p>
<div class="codehilite"><pre><span></span><span class="n">Band</span><span class="o">:</span> <span class="mi">3</span>
<span class="mf">0.0</span> <span class="mf">0.0464876236664</span>
</pre></div>


<p>that, is, the ZPR is about three times smaller, and similary for the temperature dependence.</p>
<!--
![](tdepes_assets/plot3.png)
-->

<p>As a matter of fact, diamond requires an extremely dense q-point grid (40x40x40) to be converged. 
On the bright side, each q-point calculation is independent and thus the parallel scaling is ideal&hellip;
Running separate jobs for different q-points is quite easy thanks to the dtset approach.</p>
<h2 id="3-calculation-of-the-eigenenergy-corrections-along-high-symmetry-lines">3 Calculation of the eigenenergy corrections along high-symmetry lines<a class="headerlink" href="#3-calculation-of-the-eigenenergy-corrections-along-high-symmetry-lines" title="Permanent link">&para;</a></h2>
<p>The calculation of the electronic eigenvalue correction due to electron-phonon
coupling along high-symmetry lines requires the use of 6 datasets per q-point.
Moreover, the choice of an arbitrary k-wavevector breaks all symmetries of the crystal.
Different datasets are required to compute the following quantites:</p>
<dl>
<dt>
<script type="math/tex">\Psi^{(0)}_{kHom}</script>
</dt>
<dd>
<p>The ground-state wavefunctions on the Homogeneous k-point sampling. </p>
</dd>
<dt>
<script type="math/tex">\Psi^{(0)}_{kBS}</script>
</dt>
<dd>
<p>The ground-state wavefunctions computed along the bandstructure k-point sampling. </p>
</dd>
<dt>
<script type="math/tex">\Psi^{(0)}_{kHom+q}</script>
</dt>
<dd>
<p>The ground-state wavefunctions on the shifted Homogeneous k+q-point sampling. </p>
</dd>
<dt>
<script type="math/tex">n^{(1)}</script>
</dt>
<dd>
<p>The perturbed density integrated over the homogeneous k+q grid. </p>
</dd>
<dt>
<script type="math/tex">\Psi^{(0)}_{kBS+q}</script>
</dt>
<dd>
<p>The ground-state wavefunctions obtained from reading the perturbed density of the previous dataset. </p>
</dd>
</dl>
<p>Reading the previous quantity we obtain the el-ph matrix elements along the BS with all physical 
quantities integrated over a homogeneous grid. </p>
<p>We will use the <a class="wikilink abifile-wikilink" data-content="Temperature dependence calculation of diamond." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/tutorespfn/Input/tdepes_4.in" target="_blank">tests/tutorespfn/Input/tdepes_4.in</a> input file</p>
<div class="text-center"><button type="button" id="uuid-4735f9b4-d9e4-4a78-bfa5-4d8bf509dc65" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_4.in
</button></div>

<div id="uuid-d87e01e2-3a1f-4191-9687-94ac805afb90" class="my_dialog" title="tests/tutorespfn/Input/tdepes_4.in" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># C in diamond structure. </span>
 ndtset <span class="m">48</span> udtset <span class="m">8</span> <span class="m">6</span>
 iqpt:? <span class="m">1</span>               <span class="c1"># Index of the first q-point of this file (useful if you split your </span>
                        <span class="c1"># input files</span>

 elph2_imagden <span class="m">0</span>.1 eV   <span class="c1"># Imaginary shift of the denominator of the sum-over-states </span>
                        <span class="c1"># in the perturbation denominator. Usual value is 0.1 eV to reproduce</span>
                        <span class="c1"># experimental broadening at 300K. Increasing the value help the </span>
                        <span class="c1"># convergence with respect to the number of q-points. </span>
 ngkpt <span class="m">2</span> <span class="m">2</span> <span class="m">2</span>            <span class="c1"># Underconverged : k-grid should be at least 4x4x4 for diamond to be converged.</span>
 nshiftk <span class="m">1</span>
 shiftk <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
 ngqpt <span class="m">2</span> <span class="m">2</span> <span class="m">2</span>            <span class="c1"># Should be converged upon</span>
 qptopt <span class="m">3</span>
 nshiftq <span class="m">1</span>
 shiftq <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0

<span class="c1"># Ground state density</span>
 iqpt+?    <span class="m">1</span>
 tolvrs?1  <span class="m">1</span>.0d-8   <span class="c1"># Underconverged : tolvrs 1.0d-18 should be used for converged results</span>

<span class="c1"># Non self-consistent calculation following high sym k path</span>
 getden?2   -1
 iscf?2     -2
 getwfk?2   -1
 nstep?2     <span class="m">50</span>
 tolwfr?2    <span class="m">1</span>.0d-8   <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt?2   -9
 ndivsm?2    <span class="m">5</span>
 kptbounds?2
    <span class="m">1</span>/2 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># L</span>
    <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Gamma</span>
    <span class="m">0</span>.0 <span class="m">1</span>/2 <span class="m">1</span>/2  <span class="c1"># X</span>
    <span class="m">1</span>/4 <span class="m">1</span>/2 <span class="m">3</span>/4  <span class="c1"># W</span>
    <span class="m">3</span>/8 <span class="m">3</span>/8 <span class="m">3</span>/4  <span class="c1"># K</span>
    <span class="m">1</span>/2 <span class="m">1</span>/2 <span class="m">1</span>/2  <span class="c1"># L</span>
    <span class="m">1</span>/4 <span class="m">1</span>/2 <span class="m">3</span>/4  <span class="c1"># W</span>
    <span class="m">1</span>/2 <span class="m">1</span>/2 <span class="m">1</span>.0  <span class="c1"># X</span>
    <span class="m">3</span>/8 <span class="m">3</span>/8 <span class="m">3</span>/4  <span class="c1"># K</span>
    <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Gamma</span>

<span class="c1"># Non self-consistent calculation with an arbitrary q point </span>
 getden?3 -2
 getwfk?3 -2
 iscf?3   -2
 nqpt?3    <span class="m">1</span>
 nbdbuf?3  <span class="m">2</span>
 tolwfr?3  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt?3  <span class="m">1</span>

<span class="c1"># Computation at q</span>
 getwfk?4 -3
 getwfq?4 -1
 nqpt?4    <span class="m">1</span>
 ieig2rf?4 <span class="m">5</span>            <span class="c1"># Static eigenvalues corrections using DFPT (Sternheimer)</span>
 smdelta?4 <span class="m">1</span>            <span class="c1"># Flag required to produce the _EIGI2D used to </span>
                        <span class="c1"># compute the lifetime of electronic levels.</span>
                        <span class="c1"># smdelta = 1 ==&gt; Fermi-Dirac smearing.</span>
 nbdbuf?4  <span class="m">2</span>            <span class="c1"># 2 buffer bands. RF converges much faster.</span>
 rfphon?4  <span class="m">1</span>            <span class="c1"># Do phonon response</span>
 rfatpol?4 <span class="m">1</span> <span class="m">2</span>          <span class="c1"># Treat displacements of all atoms</span>
 rfdir?4   <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>        <span class="c1"># Do all directions </span>
 tolwfr?4  <span class="m">1</span>.0d-8       <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt?4  <span class="m">3</span>

<span class="c1"># Non self-consistent calculation following high sym k path</span>
 nqpt?5      <span class="m">1</span>
 getden?5   -4
 iscf?5     -2
 get1den?5  -1
 getwfk?5   -3
 nbdbuf?5    <span class="m">2</span>       <span class="c1"># 2 buffer bands. RF converges much faster.</span>
 nstep?5     <span class="m">1</span>       <span class="c1"># We do not want mixing (self-consistent)</span>
 tolwfr?5    <span class="m">1</span>.0d-8  <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 kptopt?5   -9
 ndivsm?5    <span class="m">5</span>
 kptbounds?5
    <span class="m">1</span>/2 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># L</span>
    <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Gamma</span>
    <span class="m">0</span>.0 <span class="m">1</span>/2 <span class="m">1</span>/2  <span class="c1"># X</span>
    <span class="m">1</span>/4 <span class="m">1</span>/2 <span class="m">3</span>/4  <span class="c1"># W</span>
    <span class="m">3</span>/8 <span class="m">3</span>/8 <span class="m">3</span>/4  <span class="c1"># K</span>
    <span class="m">1</span>/2 <span class="m">1</span>/2 <span class="m">1</span>/2  <span class="c1"># L</span>
    <span class="m">1</span>/4 <span class="m">1</span>/2 <span class="m">3</span>/4  <span class="c1"># W</span>
    <span class="m">1</span>/2 <span class="m">1</span>/2 <span class="m">1</span>.0  <span class="c1"># X</span>
    <span class="m">3</span>/8 <span class="m">3</span>/8 <span class="m">3</span>/4  <span class="c1"># K</span>
    <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Gamma</span>


<span class="c1"># Computation at an other q point</span>
 nqpt?6     <span class="m">1</span>
 getden?6  -5
 get1den?6 -2
 getwfk?6  -4
 getwfq?6  -1
 tolwfr?6   <span class="m">1</span>.0d-8  <span class="c1"># Underconverged : tolwfr 1.0d-22 should be used for converged results</span>
 nbdbuf?6   <span class="m">2</span>       <span class="c1"># 2 buffer bands. RF converges much faster.</span>
 <span class="c1">#ieig2rf?6  1</span>
 ieig2rf?6  <span class="m">5</span>
 smdelta?6  <span class="m">1</span>
 rfphon?6   <span class="m">1</span>
 rfatpol?6  <span class="m">1</span> <span class="m">2</span>
 rfdir?6    <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>
 iscf?6    -2
 kptopt?6  -9
 ndivsm?6   <span class="m">5</span>
 kptbounds?6
    <span class="m">1</span>/2 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># L</span>
    <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Gamma</span>
    <span class="m">0</span>.0 <span class="m">1</span>/2 <span class="m">1</span>/2  <span class="c1"># X</span>
    <span class="m">1</span>/4 <span class="m">1</span>/2 <span class="m">3</span>/4  <span class="c1"># W</span>
    <span class="m">3</span>/8 <span class="m">3</span>/8 <span class="m">3</span>/4  <span class="c1"># K</span>
    <span class="m">1</span>/2 <span class="m">1</span>/2 <span class="m">1</span>/2  <span class="c1"># L</span>
    <span class="m">1</span>/4 <span class="m">1</span>/2 <span class="m">3</span>/4  <span class="c1"># W</span>
    <span class="m">1</span>/2 <span class="m">1</span>/2 <span class="m">1</span>.0  <span class="c1"># X</span>
    <span class="m">3</span>/8 <span class="m">3</span>/8 <span class="m">3</span>/4  <span class="c1"># K</span>
    <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0  <span class="c1"># Gamma</span>

<span class="c1"># Cell dependant parameters</span>
 acell <span class="m">3</span>*6.675
 rprim <span class="m">0</span> .5 .5 .5 <span class="m">0</span> .5 .5 .5 <span class="m">0</span>
 nsym <span class="m">1</span>                <span class="c1"># Disable symmetries. Symmetries are not yet in production.</span>
 natom <span class="m">2</span>
 typat <span class="m">1</span> <span class="m">1</span>
 xred <span class="m">3</span>*0.0 <span class="m">3</span>*0.25
 nband <span class="m">12</span>
 ntypat <span class="m">1</span>
 znucl <span class="m">6</span>
 diemac <span class="m">6</span>
 ecut <span class="m">10</span>              <span class="c1"># Underconverged ecut. </span>
 enunit <span class="m">2</span>
 nstep <span class="m">50</span>
 istwfk *1

<span class="c1">## After modifying the following section, one might need to regenerate the pickle database with runtests.py -r</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% need_cpp_vars = HAVE_NETCDF</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% files_to_test = </span>
<span class="c1">#%%   tdepes_4.out,  tolnlines= 0, tolabs=  0.000e-00, tolrel=  0.000e-00, fld_options=-easy</span>
<span class="c1">#%% psp_files =  6c.pspnc</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 2</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = S. Ponc\&#39;e</span>
<span class="c1">#%% keywords = NC, DFPT, EPH</span>
<span class="c1">#%% description = Temperature dependence calculation of diamond.</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-d87e01e2-3a1f-4191-9687-94ac805afb90", "#uuid-4735f9b4-d9e4-4a78-bfa5-4d8bf509dc65") }); </script>

<p>Note the use of the usual input variables to define a path in the Brillouin Zone to build an electronic band structure:
<a class="wikilink codevar-wikilink" href="../../variables/gstate#kptbounds">kptbounds</a>, <a class="wikilink codevar-wikilink" href="../../variables/basic#kptopt">kptopt</a>, and <a class="wikilink codevar-wikilink" href="../../variables/gstate#ndivsm">ndivsm</a>. Note also that we have defined <a class="wikilink codevar-wikilink" href="../../variables/gstate#qptopt">qptopt</a>=3. The number of q-points
is thus very easy to determine, as being the product of <a class="wikilink codevar-wikilink" href="../../variables/gstate#ngqpt">ngqpt</a> values times <a class="wikilink codevar-wikilink" href="../../variables/gstate#nshiftq">nshiftq</a>. Here a very rough 2*2*2 grid has been chosen,
even less dense than the one for section 2.</p>
<p>After possibly modifying <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_4.files" target="_blank">tests/tutorespfn/Input/tdepes_4.files</a> to account for the location of the pseudopotential file, as above, issue:</p>
<div class="codehilite"><pre><span></span>abinit &lt; tdepes_4.files &gt; tdepes_4.stdout
</pre></div>


<p>This is a significantly longer ABINIT run (2-3 minutes), also producing many files.</p>
<p>then use <a class="wikilink abifile-wikilink" href="../../tests/tutorespfn/Input/tdepes_4_temperature.in" target="_blank">tests/tutorespfn/Input/tdepes_4_temperature.in</a> for the python script. </p>
<div class="text-center"><button type="button" id="uuid-2bb2013d-8d02-44fa-892c-f60296860f46" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_4_temperature.in
</button></div>

<div id="uuid-a4b935d5-f8f4-44fd-8e5a-eef1ffc9f6c7" class="my_dialog" title="tests/tutorespfn/Input/tdepes_4_temperature.in" hidden><div><div class="codehilite small-text"><pre><span></span><span class="m">1</span>                  
<span class="m">2</span>                  
temperature_4
<span class="m">0</span>.1                
<span class="m">0</span>.1                
<span class="m">0</span> <span class="m">0</span>.5              
<span class="m">0</span> <span class="m">1000</span> <span class="m">50</span>          
<span class="m">8</span>                  
tdepes_4o_DS14_DDB
tdepes_4o_DS24_DDB
tdepes_4o_DS34_DDB
tdepes_4o_DS44_DDB
tdepes_4o_DS54_DDB
tdepes_4o_DS64_DDB
tdepes_4o_DS74_DDB
tdepes_4o_DS84_DDB
tdepes_4o_DS15_EIG.nc
tdepes_4o_DS25_EIG.nc
tdepes_4o_DS35_EIG.nc
tdepes_4o_DS45_EIG.nc
tdepes_4o_DS55_EIG.nc
tdepes_4o_DS65_EIG.nc
tdepes_4o_DS75_EIG.nc
tdepes_4o_DS85_EIG.nc
tdepes_4o_DS16_EIGR2D.nc 
tdepes_4o_DS26_EIGR2D.nc
tdepes_4o_DS36_EIGR2D.nc
tdepes_4o_DS46_EIGR2D.nc
tdepes_4o_DS56_EIGR2D.nc
tdepes_4o_DS66_EIGR2D.nc
tdepes_4o_DS76_EIGR2D.nc
tdepes_4o_DS86_EIGR2D.nc
tdepes_4o_DS16_GKK.nc 
tdepes_4o_DS26_GKK.nc
tdepes_4o_DS36_GKK.nc
tdepes_4o_DS46_GKK.nc
tdepes_4o_DS56_GKK.nc
tdepes_4o_DS66_GKK.nc
tdepes_4o_DS76_GKK.nc
tdepes_4o_DS86_GKK.nc
tdepes_4o_DS12_EIG.nc 
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-a4b935d5-f8f4-44fd-8e5a-eef1ffc9f6c7", "#uuid-2bb2013d-8d02-44fa-892c-f60296860f46") }); </script>

<p>with the usual syntax:</p>
<div class="codehilite"><pre><span></span>./temperature_final.py &lt; tdepes_4_temperature.in
</pre></div>


<!-- THIS SECTION DOES NOT SEEM CORRECT : there is no other k point computed in section 2 ...
Of course, the high symmetry points computed in section 2 have the same value here. 
It is a good idea to check it by running the script with the file [[tests/tutorespfn/Input/tdepes_3bis.files]].

<div class="text-center"><button type="button" id="uuid-c13ca78d-2885-44c8-92b3-819d5a20ff5d" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutorespfn/Input/tdepes_3bis.files
</button></div>
<div id="uuid-8b488e00-5ed5-4cbb-a816-6a10acf2c185" class="my_dialog" title="tests/tutorespfn/Input/tdepes_3bis.files" hidden><div><pre class="small-text">
1                  
2                  
temperature4_bis   
0.1                
0.1                
0 0.5              
0 1000 50          
8                  
tdepes_4o_DS14_DDB
tdepes_4o_DS24_DDB
tdepes_4o_DS34_DDB
tdepes_4o_DS44_DDB
tdepes_4o_DS54_DDB
tdepes_4o_DS64_DDB
tdepes_4o_DS74_DDB
tdepes_4o_DS84_DDB
tdepes_4o_DS13_EIG.nc
tdepes_4o_DS23_EIG.nc
tdepes_4o_DS33_EIG.nc
tdepes_4o_DS43_EIG.nc
tdepes_4o_DS53_EIG.nc
tdepes_4o_DS63_EIG.nc
tdepes_4o_DS73_EIG.nc
tdepes_4o_DS83_EIG.nc
tdepes_4o_DS14_EIGR2D.nc
tdepes_4o_DS24_EIGR2D.nc
tdepes_4o_DS34_EIGR2D.nc
tdepes_4o_DS44_EIGR2D.nc
tdepes_4o_DS54_EIGR2D.nc
tdepes_4o_DS64_EIGR2D.nc
tdepes_4o_DS74_EIGR2D.nc
tdepes_4o_DS84_EIGR2D.nc
tdepes_4o_DS14_GKK.nc
tdepes_4o_DS24_GKK.nc
tdepes_4o_DS34_GKK.nc
tdepes_4o_DS44_GKK.nc
tdepes_4o_DS54_GKK.nc
tdepes_4o_DS64_GKK.nc
tdepes_4o_DS74_GKK.nc
tdepes_4o_DS84_GKK.nc
tdepes_4o_DS11_EIG.nc

</pre>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-8b488e00-5ed5-4cbb-a816-6a10acf2c185", "#uuid-c13ca78d-2885-44c8-92b3-819d5a20ff5d") }); </script>

-->

<p>You can now copy the plotting script (Plot-EP-BS) python file from
~abinit/scripts/post_processing/plot_bs.py into the directory where you did all the calculations.<br />
Now run the script:</p>
<div class="codehilite"><pre><span></span>./plot_bs.py
</pre></div>


<p>with the following input data:</p>
<div class="codehilite"><pre><span></span>temperature_4_EP.nc
L \Gamma X W K L W X K \Gamma
-20 30
0
</pre></div>

<p>or more directly </p>
<div class="codehilite"><pre><span></span>./plot_bs.py &lt; tdepes_4_plot_bs.in
</pre></div>


<p>This should give the following bandstructure  </p>
<p><img alt="" src="../tdepes_assets/plot4.png" /></p>
<p>where the solid black lines are the traditional electronic bandstructure, the
dashed lines are the electronic eigenenergies with electron-phonon
renormalization at a defined temperature (here 0K). Finally the area around
the dashed line is the lifetime of the electronic eigenstates.</p>
<p>Notice all the spikes in the electron-phonon case. This
is because we did a completely under-converged calculation
with respect to the q-point sampling.</p>
<p>It is possible to converge the calculations using <a class="wikilink codevar-wikilink" href="../../variables/basic#ecut">ecut</a>=30 Ha, a <a class="wikilink codevar-wikilink" href="../../variables/basic#ngkpt">ngkpt</a>
grid of 6x6x6 and an increasing <a class="wikilink codevar-wikilink" href="../../variables/gstate#ngqpt">ngqpt</a> grid to get converged results:</p>
<div class="codehilite"><pre><span></span>| Convergence study ZPR and inverse lifetime(1/τ) [eV] at 0K                |
| q-grid   | Nb qpt |       Γ25&#39;      |        Γ15       |      Min Γ-X     | 
|          | in IBZ |  ZPR   |  1/τ   |   ZPR   |  1/τ   |   ZPR   |  1/τ   |
| 4x4x4    |  8     | 0.1175 | 0.0701 | -0.3178 | 0.1916 | -0.1570 | 0.0250 |
| 10x10x10 |  47    | 0.1390 | 0.0580 | -0.3288 | 0.1847 | -0.1605 | 0.0308 |
| 20x20x20 |  256   | 0.1446 | 0.0574 | -0.2691 | 0.1823 | -0.1592 | 0.0298 |
| 26x26x26 |  511   | 0.1448 | 0.0573 | -0.2736 | 0.1823 | -0.1592 | 0.0297 |
| 34x34x34 |  1059  | 0.1446 | 0.0573 | -0.2699 | 0.1821 | -0.1591 | 0.0297 | 
| 43x43x43 |  2024  | 0.1447 | 0.0572 | -0.2650 | 0.1821 | -0.1592 | 0.0297 |
</pre></div>


<p>As you can see the limiting factor for the convergence study is the
convergence of the LUMO band at <script type="math/tex">\Gamma</script>. This band is not the lowest in energy (the
lowest is on the line between <script type="math/tex">\Gamma</script> and X) and therefore this band is rather
unstable. This can also be seen by the fact that it has a large electronic
broadening, meaning that this state will decay quickly into another state.</p>
<p>Using the relatively dense q-grid of 43x43x43 we can obtain the following
converged bandstructure, at a high temperature (1900K):  </p>
<p><img alt="" src="../tdepes_assets/plot5.png" /></p>
<p>Here we show the renormalization at a very high temperature of 1900K in order
to highlight more the broadening and renormalization that occurs. If you want
accurate values of the ZPR at 0K you can look at the table above.</p>
<p><strong>Additional consideration : possible issue while converging your calculations</strong></p>
<p>If you use an extremely fine q-point grid, the acoustic phonon frequencies for
q-points close to <script type="math/tex">\Gamma</script> will be wrongly determined by Abinit. Indeed in order to
have correct phonon frequencies close to <script type="math/tex">\Gamma</script>, one has to impose the acousting sum rule
with anaddb and <a class="wikilink codevar-wikilink" href="../../variables/anaddb#asr">asr@anaddb</a>. 
However, this feature is not available in the python script. Instead, the script reject the
contribution of the acoustic phonon close to <script type="math/tex">\Gamma</script> if their phonon frequency is
lower than 1E-6 Ha. Otherwise one gets unphysically large contribution. </p>
<p>One can tune this parameter by editing the variable &ldquo;tol6 = 1E-6&rdquo; in the beginning of the script.</p>
<p>For example, for the last 43x43x43 calculation, it was set to 1E-4.</p>
                
                  
                
              

<!-- 
add dropdown button with toolbar (based on https://bootsnipp.com/snippets/featured/inbox-by-gmail)
and return to Top button (based on https://codepen.io/rdallaire/pen/apoyx)
-->
<div class="md-container">
  <div class="row">
    <div id="inbox">
      <div class="fab btn-group show-on-hover dropup">
        <div data-toggle="tooltip" data-placement="left" title="Menu" style="margin-left: 42px;">
          <button id="return-to-top" type="button" class="btn btn-primary btn-io dropdown-toggle" data-toggle="dropdown">
            <span class="fa-stack fa-2x">
                <i class="fa fa-circle fa-stack-2x fab-backdrop"></i>
                <i class="fa fa-chevron-up fa-stack-1x fa-inverse fab-primary"></i>
                <i class="fa fa-map-signs fa-stack-1x fa-inverse fab-secondary"></i>
            </span>
          </button>
        </div>
        <ul class="dropdown-menu dropdown-menu-right" role="menu">
        
        
          <li><a href="../../about/release-notes/" data-toggle="tooltip" data-placement="left" 
                  title="About"><i class="fa fa-info-circle"></i></a></li>
        
          <li><a href="../../developers/abimkdocs/" data-toggle="tooltip" data-placement="left" 
                  title="Developers"><i class="fa fa-terminal"></i></a></li>
        
          <li><a href="../../theory/geometry/" data-toggle="tooltip" data-placement="left" 
                  title="Theory"><i class="fa fa-book"></i></a></li>
        
          <li><a href="../" data-toggle="tooltip" data-placement="left" 
                  title="Lessons"><i class="fa fa-graduation-cap"></i></a></li>
        
          <li><a href="../../variables/" data-toggle="tooltip" data-placement="left" 
                  title="Variables"><i class="fa fa-file-text-o"></i></a></li>
        
          <li><a href="../../topics/features/" data-toggle="tooltip" data-placement="left" 
                  title="Topics"><i class="fa fa-question"></i></a></li>
        
          <li><a href="../.." data-toggle="tooltip" data-placement="left" 
                  title="User Guide"><i class="fa fa-user-circle-o"></i></a></li>
        
        <!--
        Example: 
        <li><a href="/index.html" data-toggle="tooltip" data-placement="left" title="User-Guide">
              <i class="fa fa-user-circle-o"></i></a></li>
        -->
        </ul>
      </div>
    </div>
  </div>
</div>

              
                
              
            </article>
          </div>
        </div>
      </main>
      
    <!-- Add tabs to footer -->
    
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." title="User Guide" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../topics/features/" title="Topics" class="md-tabs__link">
          Topics
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../variables/" title="Variables" class="md-tabs__link">
          Variables
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Lessons" class="md-tabs__link md-tabs__link--active">
          Lessons
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../theory/geometry/" title="Theory" class="md-tabs__link">
          Theory
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../developers/abimkdocs/" title="Developers" class="md-tabs__link">
          Developers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/release-notes/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
    
    
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../eph/" title="Eph" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Eph
              </span>
            </div>
          </a>
        
        
          <a href="../gw1/" title="GW1" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                GW1
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
            <center>Abinit version 8.8.4</center>
        
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 The Abinit Group (SP)
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/abinit/abinit" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/hashtag/abinit" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="http://www.facebook.com/abinit.org" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.youtube.com/watch?v=gcbfb_Mteo4" class="md-footer-social__link fa fa-youtube"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      

    </div>
    
      <script src="../../assets/javascripts/application.02434462.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
        <script src="../../extra_javascript/jquery.dialogextend.min.js"></script>
      
        <script src="../../extra_javascript/abidocs.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-116681470-1","docs.abinit.org"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>